<html>
  <head>
    <title>Tic Tac Toe.com</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
      }
      :root {
        --primary-color: linear-gradient(
          to bottom right,
          #2d4ac2,
          #1c91e6,
          #5e8de6
        );
        --white-color: #fff;
        --black-color: #18191a;
        --red-color: #e74c3c;
      }
      body {
        background: var(--primary-color);
      }
      .select-box,
      .play-board,
      .result-box {
        position: absolute;
        margin-top: auto;
        top: auto;
        left: 50%;
        transform: translate(-50%, -50%);
        transition: all 0.3s ease;
        padding-bottom: 0px;
      }
      .select-box {
        position: relative;
        top: 30%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #fff;
        padding: 20px 25px 25px;
        border-radius: 8px;
        max-width: 330px;
        width: 100%;
        box-shadow: 0 10px 10px rgba(0, 0, 0, 0.1);
        border: 2px solid #000;
      }
      .select-box.hide {
        opacity: 0;
        pointer-events: none;
        transform: translate(-50%, -50%) scale(0.9);
      }
      .select-box header {
        font-size: 23px;
        font-weight: 600;
        padding: auto;
        border-bottom: 1px solid #ccc;
      }
      .select-box .title {
        font-size: 18px;
        font-weight: 500;
        margin: 20px 0;
      }
      .select-box .options {
        display: flex;
        width: 100%;
      }
      .options button {
        width: 100%;
        font-size: 18px;
        font-weight: 500;
        padding: 8px 0;
        border: none;
        outline: none;
        background: #56baef;
        border-radius: 5px;
        color: #fff;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .options button:hover {
        transform: scale(0.98);
      }
      .options button.playerX {
        margin-right: 5px;
        margin-left: 5px;
        margin-bottom: 5px;
      }
      .options button.playerY {
        margin-right: 5px;
        margin-left: 5px;
      }
      .play-board {
        opacity: 0;
        pointer-events: none;
        transform: translate(-50%, -50%) scale(0.9);
      }
      .play-board.show {
        opacity: 1;
        pointer-events: auto;
        transform: translate(-50%, -50%) scale(1);
      }
      .play-board .details {
        background: #fff;
        padding: 7px;
        border-radius: 5px;
      }
      .play-board .details .players {
        display: flex;
        width: 100%;
        position: relative;
        justify-content: space-between;
      }
      .play-board .details span {
        color: #56daef;
        width: 100;
        border-radius: 5px;
        padding: 7px 0;
        font-size: 20px;
        font-weight: 500;
        cursor: default;
        width: 100%;
        text-align: center;
        position: relative;
        z-index: 5;
        transition: all 0.3s ease;
        box-shadow: 0 10px 10px rgba(0, 0, 0, 0.1);
      }
      .details span:first-child {
        color: #fff;
      }
      .details .slider {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        width: 50%;
        background: #56baef;
        border-radius: 5px;
        z-index: 2;
        transition: all 0.3s ease;
      }
      .players.active span:first-child {
        color: #56baef;
      }
      .players.active span:nth-child(2) {
        color: #fff;
      }
      .players.active .slider {
        left: 50%;
      }
      .play-board .play-area {
        margin-top: 20px;
      }
      .play-board section {
        display: flex;
      }
      .play-board section span {
        display: block;
        margin: 2px;
        padding-top: 2px;
        height: 80px;
        width: 80px;
        background: #fff;
        border-radius: 5px;
        font-size: 40px;
        font-weight: 800;
        text-align: center;
        align-items: center;
        line-height: 80px;
        color: #56baef;
        box-shadow: 0 10px 10px rgba(0, 0, 0, 0.1);
        border: 2px solid #000;
      }
      .result-box {
        background: #fff;
        padding: 20px;
        border-radius: 5px;
        max-width: 380px;
        width: 100%;
        box-shadow: 0 10px 10px rgba(0, 0, 0, 0.1);
        border: 2px solid #000;
        opacity: 0;
        pointer-events: none;
        transform: translate(-50%, -50%) scale(0.9);
      }
      .result-box.show {
        opacity: 1;
        pointer-events: auto;
        transform: translate(-50%, -50%) scale(1);
      }
      .result-box .won-text {
        font-size: 25px;
        font-weight: 500;
        display: flex;
        justify-content: center;
      }
      .result-box .won-text p {
        font-weight: 600;
        margin: 0 5px;
      }
      .result-box .btn {
        display: flex;
        margin-top: 20px;
        justify-content: center;
      }
      .result-box .btn button {
        font-size: 18px;
        font-weight: 500;
        padding: 8px 20px;
        border: none;
        outline: none;
        background: #56baef;
        border-radius: 5px;
        color: #fff;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .btn button:hover {
        transform: scale(0.98);
      }
      .footerBottom {
        color: var(--black-color);
        margin: 0px auto 0;
        padding-top: 400px;
        text-align: center;
        bottom: 25px;
      }
      .designer {
        opacity: 0.9;
        letter-spacing: 1px;
        font-weight: 800;
        margin: 0px 5px;
      }

      .headerFont {
        color: transparent;
        margin: 0px auto 0;
        padding: 50px;
        text-align: center;
        background: var(--black-color);
        background-clip: text;
        -webkit-background-clip: text;
      }
      .captions {
        opacity: 1;
        letter-spacing: 1px;
        font-weight: 800;
        font-size: 100px;
        margin: 0px 3px;
        width: calc(100% mod 5);
      }
    </style>
  </head>
  <body>
    <header>
      <div class="headerFont">
        <p><span class="captions">Tic Tac Toe</span></p>
      </div>
    </header>
    <!--select-box-------------------------------------->
    <div class="select-box">
      <header>Tic Tac Toe</header>
      <div class="content">
        <div class="title">Select Which You Want To Be ?</div>
        <div class="options">
          <button class="playerX">Player A (X)</button>
          <button class="playerY">Player B (O)</button>
        </div>
      </div>
    </div>
    <!--play-Board---------------------------------------------->
    <div class="play-board">
      <div class="details">
        <div class="players">
          <span class="Xturn">X's Turn </span>
          <span class="Oturn"> O's Turn</span>
          <div class="slider"></div>
        </div>
      </div>
      <div class="play-area">
        <section>
          <span class="box1"></span> <span class="box2"></span>
          <span class="box3"></span>
        </section>
        <section>
          <span class="box4"></span> <span class="box5"></span>
          <span class="box6"></span>
        </section>
        <section>
          <span class="box7"></span> <span class="box8"></span>
          <span class="box9"></span>
        </section>
      </div>
    </div>
    <!--result-box-------------------------------------------->
    <div class="result-box">
      <div class="won-text"></div>
      <div class="btn"><button>Replay</button></div>
    </div>
    <!--Java-Script------------------------------------------------>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
      integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script>
      //Selecting All Requried Elements
      const selectBox = document.querySelector(".select-box"),
        selectXbtn = selectBox.querySelector(".playerX"),
        selectYbtn = selectBox.querySelector(".playerY"),
        playBoard = document.querySelector(".play-board"),
        allBox = document.querySelectorAll("section span"),
        players = document.querySelector(".players"),
        resultBox = document.querySelector(".result-box"),
        wonText = resultBox.querySelector(".won-text"),
        replayBtn = resultBox.querySelector("button");

      window.onload = () => {
        //oncewindow loaded
        for (let i = 0; i < allBox.length; i++) {
          //Add Onclick Attributs In All Available Section's Spans
          allBox[i].setAttribute("onclick", "clickedBox(this)");
        }

        selectXbtn.onclick = () => {
          selectBox.classList.add("hide"); //Hide The Select Box On Play A (X) Button Clicked
          playBoard.classList.add("show"); //Show The PlayBoard Section On PlayX Button Clicked
        };
        selectYbtn.onclick = () => {
          selectBox.classList.add("hide"); //Hide The Select Box On Play B (O) Button Clicked
          playBoard.classList.add("show"); //Show The PlayBoard Section On PlayY Button Clicked
          players.setAttribute("class", "players active player"); //adding threeclass name in player element
        };
      };

      let playerXIcon = "fas fa-times"; //class name of fontawesome cross icon
      let playerYIcon = "far fa-circle"; //class name of fontawesome circle icon
      let playerSign = "A (X)"; //suppose player will be x
      let runBot = true;

      //user  clicked function

      function clickedBox(element) {
        // console.log(element);
        if (players.classList.contains("player")) {
          //if players element has contains .player
          element.innerHTML = `<i class="${playerYIcon}"></i>`; //adding Circle icon tag inside user clicked element
          players.classList.add("active");
          //if player selected O then we'll change the playersign value to o
          playerSign = "B (O)"; //if player will be O then we'll change the sign
          element.setAttribute("id", playerSign);
        } else {
          element.innerHTML = `<i class="${playerXIcon}"></i>`; //adding Cross icon tag inside user clicked element
          players.classList.add("active");
          element.setAttribute("id", playerSign);
        }
        selectWinner(); //calling the winner function
        playBoard.style.pointerEvents = "none"; //once user select then user can not select any other box until box select
        element.style.pointerEvents = "none"; //once user select any box then that box can't br selected again
        let randomDelayTime = (Math.random() * 1000 + 200).toFixed(); //generating random time delay so bot will delay randomly to select box

        setTimeout(() => {
          bot(runBot); //calling bot function
        }, randomDelayTime); //passing random delay time
      }

      //bot click function

      function bot(runBot) {
        if (runBot) {
          //if runBot is true then the following codes
          //first change the playersign. so if user has X value in id then bot have o
          playerSign = "B (O)";
          let array = []; //creating empty array..we'll store unselected box index in this array
          for (let i = 0; i < allBox.length; i++) {
            if (allBox[i].childElementCount == 0) {
              //if span has no any child element
              array.push(i); //insertingunclicked  or unselected boxs inside array means that span has no children
              //console.log(i + " " + "has no children");
            }
          }
          let randomBox = array[Math.floor(Math.random() * array.length)]; //getting random index form array so bot will select random unselected box

          if (array.length > 0) {
            if (players.classList.contains("player")) {
              //if players element has contains .player
              allBox[randomBox].innerHTML = `<i class="${playerXIcon}"></i>`; //adding cross icon tag inside user clicked element
              players.classList.remove("active");
              //if user is o then the box id value will be x
              playersign = "A (X)";
              allBox[randomBox].setAttribute("id", playerSign);
            } else {
              allBox[randomBox].innerHTML = `<i class="${playerYIcon}"></i>`; //adding circle icon tag inside user clicked element
              players.classList.remove("active");
              allBox[randomBox].setAttribute("id", playerSign);
            }
            selectWinner(); //calling the winner function
          }
          allBox[randomBox].style.pointerEvents = "none"; //once bot selected any box then user can't select or clicked on thatbox
          playBoard.style.pointerEvents = "auto"; //once user select then user can not select any other box until box select
          playerSign = "A (X)"; //passing the x value
        }
      }

      // let work select the winner..

      function getClass(idname) {
        return document.querySelector(".box" + idname).id; //returning id n
      }

      function checkClass(val1, val2, val3, sign) {
        if (
          getClass(val1) == sign &&
          getClass(val2) == sign &&
          getClass(val3) == sign
        ) {
          return true;
        }
      }

      function selectWinner() {
        //if one combination of then matched then select the winnr........
        if (
          checkClass(1, 2, 3, playerSign) ||
          checkClass(4, 5, 6, playerSign) ||
          checkClass(7, 8, 9, playerSign) ||
          checkClass(1, 4, 7, playerSign) ||
          checkClass(2, 5, 8, playerSign) ||
          checkClass(3, 6, 9, playerSign) ||
          checkClass(1, 5, 9, playerSign) ||
          checkClass(3, 5, 7, playerSign)
        ) {
          console.log(playerSign + " " + "is the winner");
          // once match won by someone then stop the bot
          runBot = false;
          bot(runBot);
          setTimeout(() => {
            //we will delay to show result box
            playBoard.classList.remove("show");
            resultBox.classList.add("show");
          }, 700); //700 ms delay
          wonText.innerHTML = `Player <p>${playerSign}</p> Won The Game !`;
        } else {
          //if match has drawn
          //first we will check all id.... if all has id and no one won the game then we will draw th game
          if (
            getClass(1) != "" &&
            getClass(2) != "" &&
            getClass(3) != "" &&
            getClass(4) != "" &&
            getClass(5) != "" &&
            getClass(6) != "" &&
            getClass(7) != "" &&
            getClass(8) != "" &&
            getClass(9) != ""
          ) {
            runBot = false;
            bot(runBot);
            setTimeout(() => {
              //we will delay to show result box
              playBoard.classList.remove("show");
              resultBox.classList.add("show");
            }, 700); //700 ms delay
            wonText.textContent = `Match Has Been Drawn !`;
          }
        }
      }

      replayBtn.onclick = () => {
        window.location.reload(); //reload the Current Page...
      };
    </script>
    <footer>
      <div class="footerBottom">
        <p>
          Copyrigth Â©2024; Desingned By
          <span class="designer">Softcapphyjas Pvt. Ltd.</span>
        </p>
      </div>
    </footer>
  </body>
</html>
